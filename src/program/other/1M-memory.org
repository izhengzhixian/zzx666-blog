#+TITLE: DOS 下 1M 内存分布
#+DATE: <2018-02-03 Sat>
#+LAYOUT: post
#+OPTIONS: ^:{}
#+TAGS: program, other
#+CATEGORIES: program, other

* 起因
  由于 DOS 是 16 位系统，最大地址寻址空间为：1MB

  而寄存器所提供的最大容量只有 2 个字节 = 16 位

  所以最大的寻址空间为：0000 - FFFF

  为了满足寻址范围, 在原有的基础之上*16(即 2^4) , 因此最终的寻址范围可以在:

  00000 - FFFFF 空间范围内，即 1MB 的寻址空间

  #+BEGIN_EXPORT html
    <!--more-->
  #+END_EXPORT
* 分布图

  | 内存地址     | 解释                                                           |
  |--------------+----------------------------------------------------------------|
  | 00000-003FFh | 中断向量表                                                     |
  | 00400-004FFh | BIOS 数据区，内部存放着有关键盘、视频显示器、磁盘、            |
  |              | 打印和通讯口等工作情况的重要数据。                             |
  |              | 计算机在启动时通过对各硬件设备的检测，                         |
  |              | 把有关配置情况的数据和一些系统默认值添入其中，                 |
  |              | 同时它也在一定程度上控制着计算机系统的正常工作。               |
  | 00500-07BFFh | 约 30KB 可自定义区域                                           |
  | 07C00-07DFFh | 521B MBR 加载区                                                |
  | 07E00-9FBFFh | 608KB 的内存为操作系统和应用程序所                             |
  |              | 能够使用的应用程序无法使用 640KB 以外的内存（即"640KB 限制"）; |
  |              | 而 DOS 操作系统又占据了期间低端的一部分内存， 最后剩下 600KB   |
  |              | 左右的内存给应用程序使用。若内存中还存有驻留程序，             |
  |              | 那么应用程序还要和这些 TSR 程序共同分享这段内存空间。          |
  | 9FC00-9FFFFh | 1kb  扩展 bios 数据区                                          |
  | A0000-AFFFFh | 图形模式视频缓冲区                                             |
  | B0000-B7FFFh | 单色字符模式视频缓冲区                                         |
  | B8000-BFFFFh | 彩色字符模式视频缓冲区                                         |
  | C0000-C7FFFh | VGA BIOS 地址                                                  |
  | C8000-CFFFFh | 硬盘 BIOS 地址                                                 |
  | D0000-D7FFFh | 网络 BIOS 地址                                                 |
  | D8000-DFFFFh | 声音、通讯 BIOS 地址                                           |
  | E0000-F0000h | 保留区                                                         |
  | F0000-FFFFFh | 系统 BIOS                                                      |

* 实模式阶段可以随意使用的内存

  | 内存范围   | 大小 | 解释         |
  |------------+------+--------------|
  | 7E00-9FBFF | 608k | 自定义区域   |
  | 500-7Bff   | 30kb | 可自定义区域 |
